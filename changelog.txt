LATEST UPDATES - 28 Februari 2026
==============================

1. IMPLEMENTASI DUKUNGAN MULTI-ATTEMPT (PENGERJAAN BERULANG)
   - Mengubah sistem agar setiap pengerjaan ujian (submit) menciptakan record hasil (`userresult`) baru, bukan menimpa yang lama.
   - Menghubungkan jawaban user (`useranswer`) ke ID hasil spesifik (`userResultId`) untuk menjaga integritas data antar percobaan.
   - Pembaruan antrean scoring (`submissionQueue.js`) untuk memproses skor berdasarkan ID hasil pengerjaan.
   - Memastikan riwayat semua percobaan tersimpan dan dapat diakses di Dashboard User.
   - Penambahan unit test `tests/multiAttemptSupport.test.js` untuk verifikasi fungsionalitas.
   - File yang disentuh: 
     - node-be/controllers/examController.js
     - node-be/services/submissionQueue.js
     - node-be/services/resultService.js
     - node-be/tests/multiAttemptSupport.test.js

Timestamp: 2026-02-28 12:30:00

LATEST UPDATES - 27 Februari 2026
==============================

1. PERBAIKAN SINKRONISASI DATABASE & MIGRASI
   - Menjalankan migrasi tertunda yang menyebabkan error `Unknown column` pada tabel `settings`.
   - Memperbaiki migrasi `audit_logs` (Foreign Key constraint error) dengan menyesuaikan tipe data `userId` dari UUID ke STRING agar sesuai dengan kolom `uid` pada tabel `users`.
   - Sinkronisasi model `auditlog.js` dan `userresult.js` dengan skema database terbaru.
   - Penambahan unit test `tests/migrationSync.test.js` untuk memverifikasi integritas skema database.
   - File yang disentuh: 
     - node-be/migrations/20260227110000-create-audit-log.js
     - node-be/models/auditlog.js
     - node-be/models/userresult.js
     - node-be/tests/migrationSync.test.js

Timestamp: 2026-02-27 21:35:00

LATEST UPDATES - 27 Februari 2026
==============================

1. PENINGKATAN KEAMANAN & PRODUKSI (PRODUCTION READINESS)
   - Menghapus seluruh pesan `console.log` debug pada backend (batchController, authMiddleware, storage, imageDownloader) untuk menjaga kebersihan log produksi dan performa.
   - Implementasi batasan waktu pendaftaran (Registration Timing) pada `joinBatch`. Peserta hanya bisa mendaftar jika:
     - Waktu saat ini berada di antara `registration_open_at` dan `registration_close_at`.
     - Status batch adalah 'OPEN' atau 'RUNNING'.
   - Implementasi batasan jadwal ujian (Test Schedule) pada `getSectionData` dan `submitTest`. Peserta hanya bisa mengakses soal dan mengirim jawaban jika:
     - Waktu saat ini berada di antara `start_date` dan `end_date`.
     - Memberikan toleransi (grace period) 5 menit untuk pengiriman jawaban setelah waktu berakhir untuk mengantisipasi delay jaringan.
   - Penambahan field `start_date`, `end_date`, dan `status` pada metadata ujian untuk sinkronisasi tampilan frontend.
   - Penambahan unit test `tests/timingRestrictions.test.js` untuk memverifikasi seluruh batasan waktu di atas.
   - Perbaikan tautan laporan peserta (rename `participant.vue` ke `peserta.vue`).
   - Implementasi **Asynchronous Submission Queue** menggunakan `fastq` untuk menjamin keamanan data saat trafik tinggi.
   - Implementasi halaman **Detail Hasil Ujian** (/history/[id]) untuk analisis skor mendalam bagi user.
   - Implementasi halaman panduan admin dan kontak support.
   - Penambahan widget status antrean (Queue Status) pada Dashboard Admin.
   - Pembersihan file legacy (`test.vue`, `index.vue.bak`) dan konsolidasi log sistem.
   - File yang disentuh: 
     - node-be/controllers/batchParticipantController.js
     - node-be/controllers/examController.js
     - node-be/middlewares/authMiddleware.js
     - node-be/utils/storage.js
     - node-be/utils/imageDownloader.js
     - node-be/tests/timingRestrictions.test.js

Timestamp: 2026-02-27 10:30:00

==============================

1. PERBAIKAN BUG LAPORAN KEUANGAN (FINANCIAL RECAP)
   - Mengganti referensi kolom yang salah `namaBatch` menjadi `name` pada breakdown per batch.
   - Mengganti referensi kolom ambigu `id` menjadi `payment.id` pada breakdown metode pembayaran.
   - Memperbaiki dua error SQL kritis saat mengakses endpoint `/financial-recap`.
   - Menambahkan unit test `tests/adminStatsController.test.js` dan `tests/adminStatsController_ambiguous.test.js` (sementara).
   - File yang disentuh: 
     - node-be/controllers/adminStatsController.js

Timestamp: 2026-02-07 14:40:00

2. IMPLEMENTASI LAPORAN PESERTA (PARTICIPANT REPORT)
   - Backend: Menambahkan endpoint `GET /api/reports/participant` pada `reportRoutes.js`.
   - Backend: Implementasi `getParticipantReport` pada `reportController.js` dengan fitur pagination, search, dan filter batch.
   - Frontend: Membuat halaman Laporan Peserta (`admin/reports/participant.vue`) untuk melihat daftar peserta, skor, dan status.
   - Frontend: Implementasi composable `useParticipantReport.ts` untuk manajemen state dan fetch data laporan.
   - Testing: Menambahkan unit test `tests/reportController.test.js` untuk memverifikasi logika backend.
   - File yang disentuh: 
     - node-be/controllers/reportController.js
     - node-be/routes/reportRoutes.js
     - nuxt-fe/pages/admin/reports/participant.vue
     - nuxt-fe/composables/useParticipantReport.ts
     - node-be/tests/reportController.test.js

Timestamp: 2026-02-07 14:15:00

2. PERBAIKAN IMPORT MIDDLEWARE REPORT ROUTES
   - Memperbaiki path import `middleware` menjadi `middlewares` pada `reportRoutes.js`.
   - Mengubah import `checkAuth` (default export) dan `checkRole` (file terpisah) agar sesuai dengan struktur export.
   - Memperbaiki error startup server `MODULE_NOT_FOUND` dan `TypeError`.
   - File yang disentuh: node-be/routes/reportRoutes.js

Timestamp: 2026-02-07 13:50:00

LATEST UPDATES - 06 Februari 2026
==============================

1. PENINGKATAN DAN SENTRALISASI LOGIKA PENILAIAN (SCORING)
   - Backend: Menghapus duplikasi logika penilaian di `examController.js` dan memusatkannya di `resultService.js`.
   - Backend: Memastikan dukungan penuh untuk dua metode penilaian (SCALE dengan tabel konversi dan RAW dengan nilai awal).
   - Backend: [BARU] Mengimplementasikan sistem Fallback Scoring berbasis Database. Menghapus hardcoded JSON dan menggunakan tabel dengan flag `is_default` di DB.
   - Backend: [OPTIMASI] Mengoptimalkan performa penilaian dengan teknik Bulk Fetching, menghilangkan masalah N+1 queries.
   - Backend: Memperbarui endpoint `submitTest` untuk menggunakan `resultService.calculateUserResult` guna memastikan akurasi nilai.
   - Backend: Menjamin isolasi data antar pengerjaan (attempt) dengan membersihkan jawaban lama saat submit ulang dalam batch yang sama.
   - Frontend: [BARU] Menambahkan manajemen tabel scoring default dengan badge indikator dan tombol "Set as Default".
   - Frontend: [BARU] Menambahkan konfigurasi Scoring Type (SCALE/RAW) dan Initial Score pada halaman Add/Edit Batch.
   - Frontend: [BARU] Integrasi pemilihan tabel scoring spesifik per-section pada Exam Editor (Section Modal).
   - Frontend: [BARU] Implementasi fitur perataan pilihan jawaban (Alignment LTR/RTL) yang dapat diatur per-pertanyaan untuk mendukung Bahasa Arab.
   - Frontend: [BARU] Kustomisasi Hero Title dan Hero Subtitle pada Dashboard User melalui pengaturan admin.
   - Frontend: [BARU] Manajemen Template Sertifikat dengan dukungan multi-format (.docx) dan variabel jigga {{nama}}.
   - Frontend: [BARU] Dashboard Laporan Keuangan dengan grafik trend, breakdown per-batch, dan per-metode pembayaran.
   - Frontend: [BARU] Laporan Hasil Ujian & Analisis Soal (Distribusi Skor, Performa Section, Top 5 Soal Tersulit/Termudah).
   - Penanganan Time-out: Penilaian tetap berjalan meskipun jawaban hanya sebagian (mendukung skenario user kehabisan waktu).
   - Clean Code: Menghapus helper conversion yang redundant di `examController.js`.
   - File yang disentuh: 
     - node-be/controllers/examController.js
     - node-be/models/question.js
     - node-be/migrations/[...]-add-options-alignment-to-questions.js
     - nuxt-fe/composables/useExamEditor.ts
     - nuxt-fe/components/ExamEditor/QuestionItem.vue
     - nuxt-fe/components/Test/QuestionView.vue

Timestamp: 2026-02-06 11:05:00

LATEST UPDATES - 05 Februari 2026
==============================

1. IMPLEMENTASI DUKUNGAN MULTI-AUDIO PADA GRUP SOAL
   - Backend: Memperbarui `examController.js` untuk mendukung array `audioUrls` pada grup soal.
   - Backend: Update `updateExamData` untuk melakukan upsert banyak instruksi audio per grup.
   - Frontend: Memperbarui `GroupCard.vue` (Editor) untuk memungkinkan penambahan/penghapusan banyak audio.
   - Frontend: Memperbarui `[id].vue` (Player) untuk pemutaran audio berurutan secara otomatis (Passage Audio 1 -> Passage Audio 2 -> ... -> Question Audio).
   - Frontend: Mendukung tampilan banyak audio player pada `QuestionView.vue`.
   - Menambahkan unit test `tests/multiAudio.test.js` (Backend).
   - File yang disentuh: 
     - node-be/controllers/examController.js
     - node-be/tests/multiAudio.test.js
     - nuxt-fe/composables/useExamEditor.ts
     - nuxt-fe/composables/useTestSession.ts
     - nuxt-fe/composables/useExamData.ts
     - nuxt-fe/components/ExamEditor/GroupCard.vue
     - nuxt-fe/components/ExamEditor/ExamEditor.vue
     - nuxt-fe/components/Test/QuestionView.vue
     - nuxt-fe/pages/test/[id].vue

Timestamp: 2026-02-05 21:50:00

LATEST UPDATES - 04 Februari 2026
==============================

1. IMPLEMENTASI SISTEM AUDIO HIGH-END (AUTO-SEQUENCING)
   - Membuat `useAudioPlayer.ts` (Global Audio Manager) menggunakan `Howler.js`.
   - Implementasi `AudioFloatingWidget.vue`: Widget kontrol audio melayang dengan desain premium (glassmorphism/blur).
   - Fitur Autoplay Berurutan: Otomatis memutar audio instruksi section -> audio bacaan (passage) -> audio pertanyaan.
   - Keamanan: Menggunakan custom player (tanpa native controls) dan proteksi klik kanan untuk mencegah download mudah.
   - Indikator Visual: Menambahkan status loading dan buffering yang halus pada progress bar.
   - File yang disentuh: useAudioPlayer.ts, AudioFloatingWidget.vue, HighEndAudioPlayer.vue, [id].vue, QuestionView.vue, SectionIntroScreen.vue.

Timestamp: 2026-02-04 22:50:00

2. IMPLEMENTASI FITUR REORDERABLE SECTIONS
   - Backend: Menambahkan dukungan field `urutan` pada model `section`.
   - Backend: Memperbarui `examController.js` dan `sectionController.js` untuk pengurutan otomatis (ASC).
   - Frontend: Implementasi Drag & Drop di Sidebar menggunakan `vuedraggable`.
   - Frontend: Integrasi reordering state di `ExamEditor.vue` dan `useExamEditor.ts`.
   - Menambahkan unit test `tests/sectionOrdering.test.js` (Backend).
   - File yang disentuh: node-be/controllers/examController.js, node-be/controllers/sectionController.js, node-be/tests/sectionOrdering.test.js.

Timestamp: 2026-02-04 20:55:00

LATEST UPDATES - 2026-02-27
==============================

1. CERTIFICATE TEMPLATE CRUD & UPLOADS
   - Implementasi file upload .docx menggunakan Multer
   - Penyesuaian controller untuk handle FormData dan upload ke cdn/template
   - Penyederhanaan logika format sertifikat untuk UX yang lebih baik
   - File tersimpan di storage/template secara otomatis

9. DYNAMIC PAYMENT INSTRUCTIONS
   - Penambahan kolom `payment_instructions_bank`, `payment_instructions_offline`, dan `payment_offline_details` pada tabel `settings`.
   - Update model `setting.js` dan controller `settingController.js` untuk mendukung field pembayaran dinamis.
   - Penambahan migrasi database untuk field baru.
   - File tersentuh: `migrations/...-add-payment-instructions-to-settings.js`, `models/setting.js`, `controllers/settingController.js`.

23. OPTIMASI KEAMANAN & SISTEM AUDIT
   - Implementasi tabel `audit_logs` untuk mencatat seluruh aktivitas sistem.
   - Penambahan `auditMiddleware` untuk mencatat mutasi data (Create/Update/Delete).
   - Aktivasi Rate Limiting dengan ambang batas yang disesuaikan (relaxed global, strict auth).
   - Implementasi `MailService` menggunakan Nodemailer untuk notifikasi email otomatis.
   - Validasi jadwal ujian (start_date/end_date) yang lebih ketat pada pengerjaan tes.
   - Pembersihan debug log dan standarisasi logging menggunakan Winston.
   - Refactoring "Fat Controller" ke `examService.js` untuk meningkatkan stabilitas dan testability.
   - Implementasi in-memory caching (`node-cache`) pada endpoint metadata dan section ujian untuk performa tinggi.
   - Optimasi Database Connection Pool (max 100) untuk menangani lonjakan trafik serentak (High Concurrency).
   - Implementasi caching pada logika perhitungan skor (`resultService.js`) untuk efisiensi CPU dan I/O database.
   - Implementasi **Asynchronous Submission Queue** menggunakan `fastq` untuk menjamin data tersimpan meskipun trafik sangat tinggi.
   - Penambahan kolom `status` pada hasil ujian untuk mendukung pemrosesan latar belakang (Async Scoring).

Timestamp: 2026-02-27 11:15:00

10. REPORTING & CSV EXPORT
   - Implementasi `csvGenerator.js` untuk konversi data ke CSV.
   - Penambahan endpoint export laporan (Ujian, Peserta, Keuangan) ke `reportController.js`.
   - File tersentuh: `utils/csvGenerator.js`, `controllers/reportController.js`, `routes/reportRoutes.js`.

Timestamp: 2026-02-27 10:30:00

LATEST UPDATES - 29 Januari 2026
==============================

1. IMPLEMENTASI SISTEM SCORING DI FRONTEND
   - Membuat UI manajemen tabel konversi skor (Scoring Tables) untuk admin.
   - Menambahkan fitur CRUD tabel scoring beserta detail konversi per section category.
   - Mengintegrasikan pemilihan tabel scoring pada modal pengaturan section di Exam Editor.
   - File yang disentuh: nuxt-fe/composables/useScoring.ts, TableForm.vue, Scoring Tables pages.

Timestamp: 2026-01-29 10:00:00

2. IMPLEMENTASI SISTEM BANK SOAL (QUESTION BANK)
   - Melakukan migrasi database untuk membuat `batchId` pada tabel `sections` dan `groups` menjadi nullable.
   - Membuat `BankService.js` untuk logika *Deep Cloning*.
   - Menambahkan API endpoint `/bank`.
   - Membuat halaman manajemen Bank Soal di frontend.
   - Menambahkan fitur "Promote to Template" dan "Import from Bank" pada Exam Editor.
   - Perbaikan UI: Halaman detail Bank Soal untuk pratinjau.
   - File yang disentuh: node-be/*, nuxt-fe/pages/admin/bank/soal/*, ExamEditor components.

Timestamp: 2026-01-29 11:00:00

3. IMPLEMENTASI SISTEM EXAM LOCKING (INTEGRITY PROTECTION)
   - Menambahkan logika pengecekan integritas pada backend (`examController.js`).
   - Ujian otomatis terkunci (Read-Only) jika:
     a) Sudah ada siswa yang mengirimkan jawaban (mencegah penghapusan nilai).
     b) Waktu ujian (`start_date`) sudah dimulai.
   - Backend menolak request PUT/Update jika kondisi lock terpenuhi.
   - Frontend menampilkan Banner Peringatan berwarna kuning jika ujian terkunci.
   - Tombol "Simpan Perubahan" otomatis dinonaktifkan (disabled) saat terkunci.
   - File yang disentuh: 
     - node-be/controllers/examController.js
     - nuxt-fe/composables/useExamData.ts
     - nuxt-fe/components/ExamEditor/ExamEditor.vue

Timestamp: 2026-01-29 11:10:00

4. PENINGKATAN KEAMANAN & STABILITAS (PRODUCTION READY) (SERVER ONLY)
   - Memasang `helmet` untuk perlindungan header HTTP (anti-XSS, clickjacking).
   - Memasang `express-rate-limit` untuk mencegah Brute Force (Login) dan DDoS.
   - Migrasi konfigurasi database dari `config.json` ke `config.js` agar bisa membaca Environment Variables.
   - Menambahkan logging otomatis ke file log saat terjadi Error 500.
   - Dependensi baru: `helmet`, `express-rate-limit`, `dotenv`.
   - File yang disentuh: node-be/app.js, node-be/config/config.js, node-be/middlewares/errorHandler.js.

Timestamp: 2026-01-29 11:30:00

5. PENINGKATAN DASHBOARD ADMIN
   - Perbaikan backend `adminStatsController`: Mengambil data real dari database (bukan dummy), termasuk total user, batch aktif, dan aktivitas terbaru.
   - Redesign Frontend Dashboard: Tampilan lebih profesional dengan Card Statistik Utama (Users, Active Batch, dll).
   - Penambahan Tabel Aktivitas: Sidebar aktivitas pendaftaran user terbaru dan transaksi pembayaran terakhir.
   - File yang disentuh: node-be/controllers/adminStatsController.js, nuxt-fe/pages/admin/index.vue.

Timestamp: 2026-01-29 11:55:00

LATEST UPDATES - 02 Februari 2026
==============================

1. PENANGANAN ERROR REQUEST ENTITY TOO LARGE (Granular & Safe)
   - Menetapkan batas global payload JSON menjadi 2MB (lebih aman untuk production).
   - Menerapkan limit khusus 50MB hanya pada route `PUT /exams/:examId` untuk menangani data batch besar.
   - Hal ini mencegah serangan memory exhaustion pada endpoint lain sambil tetap mendukung penyimpanan soal dalam jumlah banyak.
   - File yang disentuh: node-be/app.js, node-be/routes/examRoutes.js

2. PROTEKSI FILE KONFIGURASI PADA DEPLOYMENT
   - Memperbarui workflow GitHub Actions (`toafl.yml` & `toefl.yml`) untuk mengecualikan file `.env`, `config/config.js`, dan `config/cors.js`.
   - Menambahkan step `rm -f` pada runner sebelum proses upload ke VPS.
   - Hal ini memastikan konfigurasi yang sudah ada di server production tidak tertimpa oleh file default dari repo saat deployment.
   - File yang disentuh: .github/workflows/toafl.yml, .github/workflows/toefl.yml

Timestamp: 2026-02-02 22:30:00. 
 
 L A T E S T 
 
 U P D A T E S 
 
 - 
 
 0 3 
 
 F e b r u a r i 
 
 2 0 2 6 
 
 = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
 
 1 . 
 
 I M P L E M E N T A S I 
 
 F U N G S I 
 
 A U D I O 
 
 P E R T A N Y A A N 
 
 - 
 
 M e n a m b a h k a n 
 
 k o l o m 
 
 a u d i o U r l 
 
 p a d a 
 
 t a b e l 
 
 q u e s t i o n s 
 
 m e l a l u i 
 
 m i g r a s i 
 
 d a t a b a s e . 
 
 - 
 
 M e m p e r b a r u i 
 
 m o d e l 
 
 q u e s t i o n 
 
 u n t u k 
 
 m e n d u k u n g 
 
 f i e l d 
 
 a u d i o U r l . 
 
 - 
 
 M o d i f i k a s i 
 
 e x a m C o n t r o l l e r . j s 
 
 p a d a 
 
 e n d p o i n t 
 
 g e t E x a m D a t a 
 
 u p d a t e E x a m D a t a 
 
 d a n 
 
 g e t S e c t i o n D a t a 
 
 u n t u k 
 
 m e m p r o s e s 
 
 a u d i o U r l 
 
 p e r 
 
 p e r t a n y a a n . 
 
 - 
 
 M e n a m b a h k a n 
 
 i n t e g r a t i o n 
 
 t e s t 
 
 t e s t s / a u d i o Q u e s t i o n . t e s t . j s 
 
 u n t u k 
 
 m e m a s t i k a n 
 
 f u n g s i o n a l i t a s 
 
 s i m p a n 
 
 d a n 
 
 a m b i l 
 
 d a t a 
 
 a u d i o . 
 
 - 
 
 F i l e 
 
 y a n g 
 
 d i s e n t u h : 
 
 - 
 
 n o d e - b e / m i g r a t i o n s / 2 0 2 6 0 2 0 3 0 0 0 0 0 0 - a d d - a u d i o - u r l - t o - q u e s t i o n s . j s 
 
 - 
 
 n o d e - b e / m o d e l s / q u e s t i o n . j s 
 
 - 
 
 n o d e - b e / c o n t r o l l e r s / e x a m C o n t r o l l e r . j s 
 
 - 
 
 n o d e - b e / t e s t s / a u d i o Q u e s t i o n . t e s t . j s 
 
 . 
 
 T i m e s t a m p : 
 
 2 0 2 6 - 0 2 - 0 3 
 
 2 2 : 5 5 : 0 0 